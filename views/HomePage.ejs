<%- include('partials/Header.ejs'); -%>

  <style>
    body {
      background-color: lightcyan;
    }
  </style>

  <div>
    <br /><br /> <br />
    <p style="position:absolute; left: 20px; font-size: 20px; color:blueviolet">Hello, <%= userName %>!</p>

    <h3 style="text-align: center; position:relative; top: 20px; margin-bottom: 50px;">Trending Posts</h3>

    <div style="width:50%; margin:auto;">

      <!-- Carousel wrapper -->
      <div id="carouselBasicExample" class="carousel slide carousel-fade"
        data-mdb-carousel-init>
        <!-- Indicators -->
        <div class="carousel-indicators">
          <button type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="0" class="active"
            aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="1"
            aria-label="Slide 2"></button>
          <button type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="2"
            aria-label="Slide 3"></button>
        </div>

        <!-- Inner -->
        <div class="carousel-inner">
          <!-- Single item -->
          <div class="carousel-item active" onclick="">
            <img src="data:image/png;base64, <%= trendyBlogs[0].image.toString('base64') %>"
            class="d-block w-100" style="height: 300px; object-fit: cover;" alt="Sunset Over the City"/>
            <div class="carousel-caption d-none d-md-block" style="color: black;">
              <h5><%= trendyBlogs[0].title %></h5>
              <p>Author: <%= trendyBlogs[0].author %></p>
              <a style="color: blue" href="/homepage_displayDetail/<%= trendyBlogs[0].id%>">Read more ➡️</a>
            </div>
          </div>

          <div class="carousel-item">
            <img src="data:image/png;base64, <%= trendyBlogs[1].image.toString('base64') %>"
            class="d-block w-100" style="height: 300px; object-fit: cover;" alt="Sunset Over the City" />
            <div class="carousel-caption d-none d-md-block" style="color: black;" >
              <h5><%= trendyBlogs[1].title %></h5>
              <p>Author: <%= trendyBlogs[1].author %></p>
              <a style="color: blue" href="/homepage_displayDetail/<%= trendyBlogs[1].id%>">Read more ➡️</a>
            </div>
          </div>

          <div class="carousel-item">
            <img src="data:image/png;base64, <%= trendyBlogs[2].image.toString('base64') %>"
            class="d-block w-100" style="height: 300px; object-fit: cover;" alt="Sunset Over the City" />
            <div class="carousel-caption d-none d-md-block" style="color: black;">
              <h5><%= trendyBlogs[2].title %></h5>
              <p>Author: <%= trendyBlogs[2].author %></p>
              <a style="color: blue" href="/homepage_displayDetail/<%= trendyBlogs[2].id%>">Read more ➡️</a>
            </div>
          </div>
        </div>
        <!-- Inner -->

        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-mdb-target="#carouselBasicExample"
          data-mdb-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-mdb-target="#carouselBasicExample"
          data-mdb-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <!-- Carousel wrapper -->


    </div>


    <h3 style="text-align: center; margin-top: 50px; margin-bottom: 50px;">All Posts</h3>

    <div>
      <% for(let blog of blogs) { %>
        <div style="display: flex; justify-content: center; margin-top: 20px; margin-bottom: 20px;">
          <div class="card mb-3" style="width: 50%;">
            <div class="row g-0">
              <div class="col-md-4">
                <img src="data:image/png;base64, <%= blog.image.toString('base64') %>" class="img-fluid rounded-start"
                  alt="blog image" style="object-fit: cover; height: 100%; height: 230px; width: 300px;" />
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h5 class="card-title">
                      <%= blog.title %>
                    </h5>
                    <% if (blog.favoriteId !==null) { %>
                      <span>❤️</span>
                      <% } %>
                  </div>

                  <p class="card-text">
                    Type: <%= blog.type%>
                  </p>
                  <p class="card-text">
                    Author: <%= blog.author%>
                  </p>
                  <p class="card-text">
                    <small class="text-muted">Date: <%= new Date(blog.date_and_time).toLocaleString('en-US', {
                        weekday: 'long' , year: 'numeric' , month: 'numeric' , day: 'numeric' , hour: 'numeric' ,
                        minute: 'numeric' , second: 'numeric' , hour12: true })%></small><br />
                  </p>
                  <a style="color: blue" href="/homepage_displayDetail/<%= blog.id%>">Read more ➡️</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <%}%>
    </div>

    <script type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.umd.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.1/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.umd.min.js"></script>